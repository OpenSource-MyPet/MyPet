<!DOCTYPE html>
<html lang="ko" xmlns:th="https://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyPet</title>
    <link rel="stylesheet" href="/index.css">
</head>
<body>
<div class="header">
    <div class="header-top">
        <div class="logo">MyPet</div>
        <div class="header-nav">
            <span class="header-nav-item">í™ˆ</span>
            <span class="header-nav-item">ì½˜í…ì¸ </span>
            <span class="header-nav-item">ì‡¼í•‘</span>
            <span class="header-nav-item">ì»¤ë®¤ë‹ˆí‹°</span>
            <span class="header-nav-item">ì„œë¹„ìŠ¤</span>
            <span class="header-nav-item">í¬ë¦¬ì—ì´í„°</span>
        </div>
        <div class="header-actions">
            <button class="login-btn">ë¡œê·¸ì¸</button>
            <span class="menu-icon">â˜°</span>
        </div>
    </div>
</div>

<div class="container">
    <!-- ê¸€ì“°ê¸° ë²„íŠ¼ -->
    <div class="write-button-container">
        <a href="/addpost" style="text-decoration-line: none"><button class="write-btn">ê¸€ì“°ê¸°</button></a>
    </div>

    <div class="masonry-grid">

        <!-- í¬ìŠ¤íŠ¸ ì¹´ë“œ -->
        <div class="post-card" th:each="post : ${postings}" th:attr = "data-value = ${post.rid}">
            <div class="post-card-header">
                <div class="post-card-avatar"><img src="https://ssoads.co.kr/common/img/default_profile.png" alt=""></div>
                <div class="post-card-username" th:text="${post.nickname}"></div>
            </div>
            <img th:src="@{|/upload/${post.storedFileName}|}" class="post-card-image" alt="ì¹´í˜ ì¸í…Œë¦¬ì–´">
            <div class="post-card-content">
                <div class="post-card-location">ì„œìš¸ ë§ˆí¬êµ¬</div>
                <div class="post-card-title" th:text="${post.title}"></div>
                <div class="post-card-description" th:text="${post.content}" ></div>
            </div>

            <div class="post-card-actions">
                <button class="action-btn like-btn" onclick="toggleLike(event, this)">ğŸ¤</button>
                <button class="action-btn">ğŸ’¬</button>
                <button class="action-btn bookmark">ğŸ”–</button>
            </div>
        </div>
    </div>
</div>

<button class="fab" onclick="alert('ìƒˆ í¬ìŠ¤íŠ¸ ì‘ì„± ê¸°ëŠ¥ (AI ì±—ë´‡ìœ¼ë¡œ í™œìš© ê³ ë¯¼ ì¤‘)')">+</button>

<script>
    function toggleLike(event, btn) {
        event.stopPropagation();

        if (btn.classList.contains('liked')) {
            btn.textContent = 'ğŸ¤';
            btn.classList.remove('liked');
        } else {
            btn.textContent = 'â¤ï¸';
            btn.classList.add('liked');
        }
    }

    // ì¹´ë“œ í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
    document.querySelectorAll('.post-card').forEach(card => {
        card.addEventListener('click', function (e) {
            if (!e.target.closest('.action-btn')) {
                const title = this.querySelector('.post-card-title').textContent;
                const value = card.dataset.value;
                const ridValue = parseInt(value)
                console.log("value : " + value)

                // alert(`"${title}" í¬ìŠ¤íŠ¸ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™`);
                window.location.href = `/postings/${ridValue}`
            }
        });
    });

    // ë„¤ë¹„ê²Œì´ì…˜ íƒ­ ì „í™˜
    document.querySelectorAll('.sub-nav-item').forEach(item => {
        item.addEventListener('click', function() {
            document.querySelectorAll('.sub-nav-item').forEach(i => i.classList.remove('active'));
            this.classList.add('active');
        });
    });
    document.querySelectorAll('.header-nav-item').forEach(item => {
        item.addEventListener('click', function() {
            document.querySelectorAll('.header-nav-item').forEach(i => i.classList.remove('active'));
            this.classList.add('active');
        });
    });
</script>
</body>
</html>