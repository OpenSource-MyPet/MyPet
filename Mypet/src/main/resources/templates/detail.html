<!DOCTYPE html>
<html lang="ko" xmlns:th="https://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyPet</title>
    <link rel="stylesheet" href="/detail.css">
</head>
<body>
<div class="header">
    <div class="header-top">
        <div class="logo" onclick="goBack()">MyPet</div>
        <div class="header-nav">
            <span class="header-nav-item">í™ˆ</span>
            <span class="header-nav-item">ì½˜í…ì¸ </span>
            <span class="header-nav-item">ì‡¼í•‘</span>
            <span class="header-nav-item active">ì»¤ë®¤ë‹ˆí‹°</span>
            <span class="header-nav-item">ì„œë¹„ìŠ¤</span>
            <span class="header-nav-item">í¬ë¦¬ì—ì´í„°</span>
        </div>
        <div class="header-actions">
            <button class="login-btn">ë¡œê·¸ì¸</button>
            <span class="menu-icon">â˜°</span>
        </div>
    </div>
</div>

<div class="container">
    <button class="back-btn" onclick="goBack()">
        â† ëª©ë¡ìœ¼ë¡œ
    </button>

    <div class="post-detail-card">
        <!-- ì‘ì„±ì ì •ë³´ -->
        <div class="post-author">
            <div class="post-author-avatar">
                <img src="https://ssoads.co.kr/common/img/default_profile.png" alt="í”„ë¡œí•„">
            </div>
            <div class="post-author-info">
                <div class="post-author-name" th:text = "${detail.nickname}"></div>
                <div class="post-author-location">ì„œìš¸ ë§ˆí¬êµ¬</div>
            </div>
            <div class="post-author-time">2ì‹œê°„ ì „</div>
        </div>

        <!-- ê²Œì‹œê¸€ ì´ë¯¸ì§€ -->
        <img th:src="@{|/upload/${detail.storedFileName}|}" class="post-image" alt="ê²Œì‹œê¸€ ì´ë¯¸ì§€">

        <!-- ê²Œì‹œê¸€ ë‚´ìš© -->
        <div class="post-content">
            <h1 class="post-title" th:text = "${detail.title}"></h1>
            <div class="post-description" th:text = "${detail.content}"></div>
        </div>

        <!-- ì•¡ì…˜ ë²„íŠ¼ -->
        <div class="post-actions">
            <button class="action-btn like-btn" onclick="toggleLike(this)">
                ğŸ¤ <span id="like-count">123</span>
            </button>
            <button class="action-btn">ğŸ’¬ <span>8</span></button>
            <button class="action-btn bookmark">ğŸ”–</button>
        </div>

        <!-- ëŒ“ê¸€ -->
        <div class="comments-section">
            <div class="comments-title">ëŒ“ê¸€ 8ê°œ</div>

            <div class="comment-input-wrapper">
                <input type="text" class="comment-input" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." id="comment-input">
                <button class="comment-submit-btn" onclick="addComment()">ì‘ì„±</button>
            </div>

            <div class="comment-list" id="comment-list">
                <div class="comment-item">
                    <div class="comment-avatar">ğŸ•</div>
                    <div class="comment-content">
                        <div class="comment-author">í”¼ìë§¤ë‹ˆì•„</div>
                        <div class="comment-text">ì €ë„ ê°€ê³  ì‹¶ì–´ìš”! ì£¼ë§ì— ì‹œê°„ ê´œì°®ì„ ê²ƒ ê°™ì•„ìš”~</div>
                        <div class="comment-time">1ì‹œê°„ ì „</div>
                    </div>
                </div>

                <div class="comment-item">
                    <div class="comment-avatar">â°</div>
                    <div class="comment-content">
                        <div class="comment-author">ì¡°ê¹…í•˜ì‹œë‹¤</div>
                        <div class="comment-text">ì¹´í˜ ìœ„ì¹˜ ì–´ë””ì¸ê°€ìš”?</div>
                        <div class="comment-time">50ë¶„ ì „</div>
                    </div>
                </div>

                <div class="comment-item">
                    <div class="comment-avatar">ğŸ±</div>
                    <div class="comment-content">
                        <div class="comment-author">ê³ ì–‘ì´ì§‘ì‚¬</div>
                        <div class="comment-text">ì‚¬ì§„ë§Œ ë´ë„ ë¶„ìœ„ê¸° ì¢‹ë„¤ìš”! ì €ë„ ì°¸ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤ ã…ã…</div>
                        <div class="comment-time">30ë¶„ ì „</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function toggleLike(btn) {
        const countSpan = document.getElementById('like-count');
        let count = parseInt(countSpan.textContent);

        if (btn.classList.contains('liked')) {
            btn.innerHTML = 'ğŸ¤ <span id="like-count">' + (count - 1) + '</span>';
            btn.classList.remove('liked');
        } else {
            btn.innerHTML = 'â¤ï¸ <span id="like-count">' + (count + 1) + '</span>';
            btn.classList.add('liked');
        }
    }

    function addComment() {
        const input = document.getElementById('comment-input');
        const commentText = input.value.trim();

        if (commentText === '') {
            alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
            return;
        }

        const commentList = document.getElementById('comment-list');
        const newComment = document.createElement('div');
        newComment.className = 'comment-item';
        newComment.innerHTML = `
                <div class="comment-avatar">ğŸ‘¤</div>
                <div class="comment-content">
                    <div class="comment-author">ë‚˜</div>
                    <div class="comment-text">${commentText}</div>
                    <div class="comment-time">ë°©ê¸ˆ ì „</div>
                </div>
            `;

        commentList.insertBefore(newComment, commentList.firstChild);
        input.value = '';

        // ëŒ“ê¸€ ìˆ˜ ì—…ë°ì´íŠ¸
        const commentCount = document.querySelector('.comments-title');
        const currentCount = parseInt(commentCount.textContent.match(/\d+/)[0]);
        commentCount.textContent = `ëŒ“ê¸€ ${currentCount + 1}ê°œ`;
    }

    // Enter í‚¤ë¡œ ëŒ“ê¸€ ì‘ì„±
    document.getElementById('comment-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            addComment();
        }
    });

    function goBack() {
        window.history.back();
    }

    // ë„¤ë¹„ê²Œì´ì…˜ íƒ­ ì „í™˜
    document.querySelectorAll('.header-nav-item').forEach(item => {
        item.addEventListener('click', function() {
            document.querySelectorAll('.header-nav-item').forEach(i => i.classList.remove('active'));
            this.classList.add('active');
        });
    });
</script>
</body>
</html>